<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tota.transport.dataaccess.dao.mysql.DeliverBalanceMysqlDAO" >

    <resultMap id="DeliverBalanceDO" type="com.tota.transport.dataaccess.domain.DeliverBalanceDO" >
        <id column="shop_id" property="shopId"  />
        <result column="balance" property="balance" />
        <result column="create_time" property="createTime" />
        <result column="update_time" property="updateTime" />
    </resultMap>


    <insert id="createBalance"  >
        INSERT INTO deliver_balance(
        shop_id, balance,create_time)
        VALUES (#{shopId}, 0 ,now())
    </insert>


    <update id="updateBalance"  >
        UPDATE
        `deliver_balance`
        <set>
            `balance` = `balance`+#{amount},
            `update_time`=now()
        </set>
        WHERE `shop_id` =  #{shopId}

    </update>


    <select id="queryBalance" resultType="long">
        SELECT
        `balance`
        FROM
        `deliver_balance`
        WHERE `shop_id` =  #{shopId}

    </select>

</mapper>